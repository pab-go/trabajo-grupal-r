"0",""
"0","resultados_porcentajes2 <- election_data |> "
"0","  mutate("
"0","    Grupo = case_when("
"0","      str_detect(siglas, ""VOX|PP"") ~ ""DERECHAS"","
"0","      str_detect(siglas, ""PSOE|UP|MP"") ~ ""IZQUIERDAS"","
"0","      str_detect(siglas, ""PNV|BNG|ERC|BILDU|CONVERGÈNCIA I UNIÓ"") ~ ""NACIONALISTA/REGIONALISTA"","
"0","      str_detect(siglas, ""CS"") ~ ""CENTRO"","
"0","      TRUE ~ ""OTROS"""
"0","    )"
"0","  ) |> "
"0","  summarise("
"0","    n_votos = sum(votos, na.rm = TRUE),   # Total de votos del grupo por elección"
"0","    .by = c(fecha,Grupo)"
"0","  ) |> "
"0","  left_join(participacion2, by = ""fecha"") |>  # Añadir el censo total por elección"
"0","  mutate("
"0","    porcentaje = (n_votos / partic_por_elec) * 100  # Calcular porcentaje sobre el censo total"
"0","  )"
"0",""
"0","resultados_porcentajes2 <- resultados_porcentajes2 |> "
"0","  mutate(Grupo = factor(Grupo, levels = c(""DERECHAS"", ""CENTRO"", ""IZQUIERDAS"", "
"0","                                          ""NACIONALISTA/REGIONALISTA"", ""OTROS""), ordered = TRUE))|> "
"0","  arrange(fecha, Grupo) "
"0",""

"0","    # Creamos una variable en election_data y en surveys que sea la fecha de las elecciones sin el día"
"0","    election_data <- election_data |> "
"0","      mutate(fecha_año_mes = format(fecha, ""%Y-%m""))"
"0",""
"0","    surveys <- surveys |> "
"0","      mutate(fecha_año_mes = format(date_elec, ""%Y-%m""))"
"0",""
"0","    # Calcular el total de votos por partido y el total de votantes por fecha"
"0","    resultados_votos <- election_data |> "
"0","      group_by(fecha_año_mes) |> "
"0","      mutate(total_votantes = sum(votos, na.rm = TRUE)) |>   # Calcular total de votantes por fecha"
"0","      ungroup() %>%"
"0","      group_by(fecha_año_mes, siglas) |> "
"0","      summarize("
"0","        total_votos = sum(votos, na.rm = TRUE),  # Total de votos por partido"
"0","        total_votantes = first(total_votantes),  # Total de votantes por fecha"
"0","        .groups = ""drop"""
"0","      )"
"0",""
"0","    # Unir las tablas surveys y election_data por las columnas fecha_año_mes y partido/siglas"
"0","    elecciones_encuestas <- surveys |> "
"0","      inner_join(resultados_votos, by = c(""fecha_año_mes"" = ""fecha_año_mes"", ""partido"" = ""siglas""))"
"0",""
"0","    # Calcular el error absoluto"
"0","    elecciones_encuestas <- elecciones_encuestas |> "
"0","      mutate(error_absoluto = abs(total_votos - puntuacion * total_votantes / 100))"

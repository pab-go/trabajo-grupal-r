"0",""
"0",""
"0","# Paso 1: Calcular los votos estimados y el error absoluto"
"0","errores <- elecciones_encuestas_filt2 |> "
"0","  group_by(date_elec) |> # Agrupar por elección "
"0","  mutate("
"0","    total_votos_eleccion = sum(votos, na.rm = TRUE)    # Calcular total de votos por elección"
"0","  ) |> "
"0","  ungroup() |> # Salir de la agrupación"
"0","  mutate("
"0","    votos_estimados = puntuacion / 100 * votos_candidaturas,  # Calcular votos estimados"
"0","    error = votos_estimados - votos ,                     # Calcular el error "
"0","    error_relativo = abs(error/votos_candidaturas)"
"0","  )"
"0",""
"0",""
"0","# Paso 2: Agrupar por medio y partido para calcular el error medio"
"0","media_errores <- errores |> "
"0","  group_by(media, partido) |> "
"0","  summarise("
"0","    error_medio = mean(error, na.rm = TRUE),          # Promedio del error absoluto"
"0","    error_mediano = median(error, na.rm = TRUE),      # Mediana del error absoluto"
"0","    n_encuestas = n_distinct(date_elec),"
"0","    relativo_medio = mean(error_relativo),  "
"0","    .groups = ""drop"""
"0","  )"
"0",""
"0","# Ver resultados resumidos"
"0","print(media_errores)"
